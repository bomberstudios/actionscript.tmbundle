{
    beforeRunningCommand = saveModifiedFiles; 
    captureFormatString = "$2, line $3: $4"; 
    capturePattern = "^(.+):(.+):(\\d+):(.*)$"; 
    command = "# run this command with the .fla file in your project, and selected\n# set FLASHCOMMAND to the location of your flashcommand binary.\n# get flashcommand here:\n# http://www.markme.com/mesh/archives/004419.cfm\n\nFLASHCOMMAND=~/bin/flashcommand\n\n#\n# end user changes\n#\n\nFLA=$TM_SELECTED_FILE\nSWF=$TM_DIRECTORY/temp.swf\n\nresult=`\"$FLASHCOMMAND\" -e -s \"$FLA\" -o \"$SWF\"`\ntest=`echo \"$result\" | grep -c Error`\n\nif [ \"$test\" != 0 ]\nthen\n   #flashcommand output is very dirty and windoze like. Let's format it !\necho $result | perl -p -i -e \"s/\\s*\\*\\*(Error|Warning)\\*\\*\\s*/\\n/g;\" | perl -p -i -e \"s/Total ActionScript Errors.+//g;\" | awk 'BEGIN {FS=\": Line \"} { a=$1; b=$1; gsub(\":\",\"/\",a); gsub(\"^.+:\",\"\",b); print a\":\"b\":\"$2}' | perl -p -i -e \"s'^(.+?)/'/';\" \nexit 1;\nelse\n  echo Built successfully.\n  open \"$SWF\"\nfi\n\nexit;"; 
    fileCaptureRegister = 2; 
    input = none; 
    keyEquivalent = "~@"; 
    lineCaptureRegister = 3; 
    name = "Build in Flash"; 
    output = separateWindow; 
    uuid = "2197A196-78E3-11D9-8177-000A95C5F126"; 
    scope = "source.actionscript";
}
